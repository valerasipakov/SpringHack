<!DOCTYPE html []>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="author" content="MarkdownViewer++" />
    <title>readme (2).md</title>
    <style type="text/css">
            
/* Avoid page breaks inside the most common attributes, especially for exports (i.e. PDF) */
td, h1, h2, h3, h4, h5, p, ul, ol, li {
    page-break-inside: avoid; 
}

        </style>
  </head>
  <body>
    <h2 id="readme">Навигация по readme</h2>
    <ol>
      <li>
        <a href="#%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5">ЗАДАНИЕ</a>
      </li>
      <li>
        <a href="#%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D0%B0">ПРОБЛЕМАТИКА</a>
      </li>
      <li>
        <a href="#%D0%BE%D0%B6%D0%B8%D0%B4%D0%B0%D0%BD%D0%B8%D1%8F">ОЖИДАЕМЫЙ РЕЗУЛЬТАТ</a>
      </li>
      <li>
        <a href="#%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F">ТРЕБОВАНИЯ К РЕЗУЛЬТАТУ</a>
      </li>
      <li>
        <a href="#%D1%80%D0%B5%D0%B7%D1%83%D0%BB%D1%8C%D1%82%D0%B0%D1%82">РЕЗУЛЬТАТ РАЗРАБОТКИ</a>
        <br />
5.1. <a href="#%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D1%8F">ИНСТРУКЦИЯ ДЛЯ УСТАНОВКИ И ЗАПУСКА ПРОЕКТА</a><br />
5.1.1. <a href="#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0">УСТАНОВКА ПРОЕКТА</a><br />
5.1.2. <a href="#%D1%82%D0%B5%D1%81%D1%82_%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA">ТЕСТОВЫЙ ЗАПУСК</a><br />
5.1.3. <a href="#%D1%84%D0%B0%D0%B9%D0%BB%D1%8B">ФАЙЛЫ ПРОЕКТА</a><br />
5.1.4. <a href="#%D1%82%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D0%B0%D0%BB">РАБОТА С ОТДЕЛЬНЫМИ СКРИПТАМИ ЧЕРЕЗ ТЕРМИНАЛ</a><br />
5.1.5. <a href="#%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81">GUI ИНТЕРФЕЙС ПОЛЬЗОВАТЕЛЯ</a><br />
5.2. <a href="#%D1%84%D0%B8%D1%88%D0%BA%D0%B8">КЛЮЧЕВЫЕ ИДЕИ/ФИШКИ РЕАЛИЗАЦИИ ПРОЕКТА</a></li>
    </ol>
    <h4 id="httpsdrive.google.comfiled17da3xxdlxvujisqhrpmzr7ow9m1lj8viviewuspsharing">Ссылка на видео с описанием работы приложения: <a href="https://drive.google.com/file/d/17da3XxDLXVUJIsqhRpmzr7oW9M1lJ8vI/view?usp=sharing">https://drive.google.com/file/d/17da3XxDLXVUJIsqhRpmzr7oW9M1lJ8vI/view?usp=sharing</a></h4>
    <h2 id="no-2">1. Задание № 2 <a name="задание"></a></h2>
    <p>Парсер для базы данных (БД).</p>
    <hr />
    <h2 id="section">2. Проблематика <a name="проблема"></a></h2>
    <p>Насыщение баз данных, содержащих информацию о комплектующих беспилотных летающих аппаратов(БПЛА) в настоящее время осуществляется<br />
в ручном режиме.</p>
    <hr />
    <h2 id="section-1">3. Ожидаемый результат <a name="ожидания"></a></h2>
    <p>В ходе хакатона командам предстоит разработать универсальный парсер для автоматического наполнения базы данных комплектующих БПЛА.</p>
    <hr />
    <h2 id="section-2">4. Требования к результату <a name="требования"></a></h2>
    <ul>
      <li>входными данными парсера является перечень сайтов, с которых будет собираться информация (преимуществом будет наличие возможности<br />
работы и с другими сайтами);</li>
      <li>перечень сайтов (<a href="https://aeromotus.ru">https://aeromotus.ru</a>, <a href="https://nelk.ru">https://nelk.ru</a>, <a href="https://dji.com/ru/dji-fpv/specs">https://dji.com/ru/dji-fpv/specs</a>, <a href="https://geobox.ru">https://geobox.ru</a>);</li>
      <li>при новых итерациях работы парсера таблица с выходными данными должна обновляться и автоматически отображать изменения;</li>
      <li>выходные данные должны быть представлены в таблице формата .xlsx.;</li>
      <li>в таблице для каждого товара необходимо указать имя файла его изображения (без расширения) и ссылку, по которой он был найден;</li>
      <li>в целях проверки работоспособности кода в директории проекта должен находиться файл README.md с описанием<br />
процесса запуска разработанного модуля в тестовой среде.</li>
    </ul>
    <hr />
    <h2 id="section-3">5. Результат разработки <a name="результат"></a></h2>
    <p>Представляем вниманию читателя проект-приложение парсера для баз данных, содержащих информацию о комплектующих БПЛА.<br />
Данное программное решение ориентировано на универсализацию процесса поиска заданных категорий товаров и их характеристик не<br />
только на указанном в требованиях перечне сайтов, но и для случайных сайтов комплектующих БПЛА. В перспективе<br />
предусмотрены возможности усовершенствования алгоритма работы путем наращивания и видоизменения структуры входных данных.</p>
    <h3 id="section-4">5.1. Инструкция для установки и запуска проекта <a name="инструкция"></a></h3>
    <h4 id="section-5">5.1.1. Установка проекта <a name="установка"></a></h4>
    <p>Для установки вам потребуется установленный python версии 3.10 и выше, а так же установленный пакетный менеджер pip. Для сборки<br />
проекта запустите терминал в директории проекта и выполните следующие команды:</p>
    <ol>
      <li>
        <code>python -m venv venv</code>
      </li>
      <li>
        <code>venv\Scripts\activate</code>
      </li>
      <li>
        <code>pip install -r requirements.txt</code>
      </li>
    </ol>
    <p>Так же нужно проделать следующую последовательность действий:</p>
    <ol>
      <li>Открыть панель управления</li>
      <li>Ввести путь "Панель управления\Все элементы панели управления\Система"</li>
      <li>Нажать Дополнительные параметры системы</li>
      <li>В открывшемся окне нажать "Переменные среды"</li>
      <li>Затем нажать кнопку создать</li>
      <li>В поле имя переменной ввести "QT_PLUGIN_PATH"</li>
      <li>В поле значение переменной ввести следующий путь:<br /><code>C:\Users\user_name\AppData\Local\Programs\Python\Python310\Lib\site-packages\PyQt5\Qt5\plugins</code><br />
(вместо user_name нужно установить имя пользователя, в аккаунте которого запускается проект, также возможно, что версия Python<br />
будет отличаться).</li>
    </ol>
    <p>Эти действия необходимы для избежания непредвиденного поведения программы.</p>
    <p>Теперь осталось из консоли запустить скрипт в виртуальной среде venv <code>python gui.py</code> и наслаждаться работой программы :)</p>
    <h4 id="section-6">5.1.2. Тестовый запуск <a name="тест_запуск"></a></h4>
    <p>Для проверки работоспособности программы нужно создать файл в папке проекта websites.txt и в него вставить следующий<br />
сайт (<a href="https://idronex.ru">https://idronex.ru</a>), далее запустить графический интерфейс (пример запуска приводился выше) и выбрать файл websites.txt.<br />
Теперь можно выбрать одно из трех действий в GUI.</p>
    <h4 id="section-7">5.1.3. Файлы проекта <a name="файлы"></a></h4>
    <p>Наш проект предоставляет пользователю 3 основные функции, с корорыми можно работать как через удобный графический интерфейс,<br />
так и через командную строку.</p>
    <p>
      <em>
        <strong>Основные возможности приложения:</strong>
      </em>
    </p>
    <ol>
      <li>
        <em>Скачивание сайта</em>: полная загрузка сайта (или сайтов) на компьютер для последующей работы с ними (сбор характеристик<br />
товаров в excel таблицу)</li>
      <li>
        <em>Анализ загруженных файлов</em>: создание json файла (сохраняется в папку data), в котором содержатся все характеристики по<br />
каждому комкретному товару. Далее этот json следует конвертировать в excel таблицу</li>
      <li>
        <em>Конвертация в Excel-таблицу</em>: создает из json файла с характеристиками excel таблицу.</li>
    </ol>
    <h4 id="section-8">5.1.4. Работа с отдельными скриптами через терминал <a name="терминал"></a></h4>
    <h5 id="update_synonyms.py">- <em><strong>update_synonyms.py</strong></em> -</h5>
    <p>Добавляет к уже существующей таблице синонимов (<em>synonyms.json</em>) новые данные. После вызова программа запросит название json<br />
файла, из которого будут браться новые данные (каждый такой файл хранится в папке source/).<br />
В папке <em>source/</em> лежит файл <em>example.json</em> в котором содержится шаблон, по которому создаются такие файлы.</p>
    <h5 id="download_site.json">- <em><strong>download_site.json</strong></em> -</h5>
    <p>Полностью скачивает сайт на компьютер. При запуске запросит один параметр - ссылка на сайт (в формате: <em><a href="https://google.com/">https://google.com/</a></em>)<br />
Во время своей работы создает папку с таким же названием как и у сайта, в ней будет лежать еще одна папка с таким же названием<br />
(в ней уже хранятся все файлы) и 3 технических файла:</p>
    <ul>
      <li>
        <em>proc.json</em> - список всех обработанных ссылок</li>
      <li>
        <em>queue.json</em> - список ссылок, которые на текущий момент находятся в очереди</li>
      <li>
        <em>unproc.json</em> - список ссылок, по которым не удалось получить положительного ответа (403б 502, 503, ..., но не 200)</li>
    </ul>
    <h5 id="parse_site.py">- <em><strong>parse_site.py</strong></em> -</h5>
    <p>Обрабатывает загруженные сайты и создает итоговый json (<em>хранится в папке data/</em>), который представляет из себя список с<br />
объектами, каждый из которых описывает товар</p>
    <h5 id="json_to_xlsx_converter.py">- <em><strong>json_to_xlsx_converter.py</strong></em> -</h5>
    <p>На вход данного модуля программы поступает json-файл, полученный при парсинге сайтов. Затем создается xlsx-файл, в котором<br />
создаются excel-листы для каждого типа товара, после чего все товары, занесенные в json-файл, переносятся в excel таблицу.</p>
    <h4 id="gui">5.1.5. GUI Интерфес пользователя <a name="интерфейс"></a></h4>
    <p>
      <em>
        <strong>Описание:</strong>
      </em>
      <br />
В оконном приложении есть 4 кнопки вида pushButton:</p>
    <ol>
      <li>"Выберите файл с перечнем сайтов": при нажатии на эту кнопку открывается проводник, в котором необходимо выбрать файл<br />
формата .txt, в котором будут записаны ссылки на вебсайт.<br />
Формат данного файла следующий: каждая ссылка должна быть записана на новой строке.<br />
После того, как файл будет выбран, в строке под данной кнопкой появится полный путь до указанного файла.</li>
      <li>"Выгрузить сайты из списка": при нажатии на эту кнопку сначала производится проверка на корректность введенных сайтов,<br />
после чего начнется загрузка файлов сайта. Логи по загрузке файла можно увидеть в консоли.</li>
      <li>"Парсинг загруженных сайтов": запуск скриптов из файла download_site.py. Необходимо дождаться завершения работы.</li>
      <li>"Получить таблицу Excel": есть два варианта работы этой программы:<br />
1. Если нажата radioButton "Выбрать ранние версии", то пользователю будет предоставлена возможность выбрать, какую<br />
версию файла json он хочет преобразовать. Все допустимые файлы json хранятся в папке data и имеют ПРЕФИКС catalog_v.<br />
2. В случае если нажата "Последняя версия", то будет создан excel документ для самой новой версии парсинга.<br />
В результате работы получится excel документ, в котором все категории товаров разбиты по листам.</li>
    </ol>
    <p>ЗАМЕЧАНИЕ: для работы с кнопками 2 и 3 обязательно нужно выбрать файл из пункта 1.</p>
    <h3 id="section-9">5.2. Ключевые идеи/фишки реализации проекта <a name="фишки"></a></h3>
    <ul class="contains-task-list">
      <li class="task-list-item">
        <input disabled="disabled" type="checkbox" checked="checked" />
        <em>Полноценная первичная выгрузка данных с сайта.</em>
      </li>
    </ul>
    <p>Осуществляем полную выгрузку информации с сайта, отказавшись от структурного поиска через карту сайта (sitemap.xml) в силу<br />
частого отсутствия упорядоченности и строгой организации html-файлов, единой логики распределения информации по сайтам<br />
у разных производителей/поставщиков/ритейлеров.<br />
Нужная нам информация о товарах и характеристиках может содержаться в любой неочевидной части/модуле/подстранице сайта,<br />
в связи с чем было принято решение полноценно считывать все возможные данные для дальнейшей дифференциации и последующего<br />
анализа.</p>
    <ul class="contains-task-list">
      <li class="task-list-item">
        <input disabled="disabled" type="checkbox" checked="checked" />
        <em>Возможность расширять перечень товаров и категорий. Уточнение поиска.</em>
      </li>
    </ul>
    <p>Входными данными, включающими в себя перечень категорий товаров и их характеристик, являются json-файлы (файлы-словари),<br />
имеющие определенную структуру, заточенную на задачу поиска конкретных данных. Для наращивания обЪема искомых данных<br />
предусмотрена возможность увеличивать число json-фалов и автоматически генерировать обощенный json. Причем в новые<br />
подгружаемые json-ы можно добавлять как новые категории, так и слова синонимы для более точного определения характеристик<br />
и самих названий товаров. Как итог, программа имеет потенциал расширять возможности парсинга и адаптировать его под запросы<br />
конкретных данных, например, поиск по англоязычной терминологии (в json словарь синонимов также прописываются английские<br />
названия товаров и характеристик).</p>
    <ul class="contains-task-list">
      <li class="task-list-item">
        <input disabled="disabled" type="checkbox" checked="checked" />
        <em>Полная перевыгрузка данных при добавлении новой информации о товарах на сайте.</em>
      </li>
    </ul>
    <p>Создание локальной копии данных с сайтов связано с решением уйти от проблемы перегрузки удаленного сервера конкретного сайта<br />
и обхода банов. Если на сайте появится новая информация по товарам или новые характеристики, пользователю доступна возможность<br />
обновить базу данных путем повторного полноценного считывания информации. Если же пользователь хочет добавить какие-то новые<br />
параметры или характеристики, которых до этого момента не было в файлах json, то стоит подгрузить новые json-файлы и провести<br />
парсинг по уже имеющейся локальной копии сайтов.</p>
    <ul class="contains-task-list">
      <li class="task-list-item">
        <input disabled="disabled" type="checkbox" checked="checked" />
        <em>Дифференциация товаров по категориям</em>
      </li>
    </ul>
    <p>Для данной задачи был разработан классификатор для однозначного определения категорий товара при схожести наименований<br />
характеристик у разных товаров на одном и том же сайте. Json-словарь слов синонимов для категорий составлен опытным путем,<br />
опираясь на информацию из конкретных сайтов(есть возможность дополнять/полностью обновлять словарь).<br />
За основу вычисления принадлежности к тому или иному типу товароа взято процентное отношение.</p>
    <p>Расчетная формута: <strong>(M : S) * 100%</strong>, где<br /><strong>M</strong> - максимальное число характеристик,<br /><strong>S</strong> - число совпадений характеристик.</p>
    <p>Т.е. общее число характеристик для типа товара, делим на количество найденных совпадений этих характеристик с сайта, и<br />
домножаем на 100%. Если на сайте встречается более 70% характеристик из максимально возможных для конкретного типа товара,<br />
то с уверенностью определяем категорию товара.</p>
    <hr />
    <hr />
    <p>
      <em>
        <strong>Разработано в МЭИ</strong>
      </em>
      <br />
      <em>
        <strong>Made in MPEI</strong>
      </em>
    </p>
  </body>
</html>
